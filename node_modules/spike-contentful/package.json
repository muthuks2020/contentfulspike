{
  "_args": [
    [
      {
        "raw": "spike-contentful",
        "scope": null,
        "escapedName": "spike-contentful",
        "name": "spike-contentful",
        "rawSpec": "",
        "spec": "latest",
        "type": "tag"
      },
      "/home/muthu/try/spiket"
    ]
  ],
  "_from": "spike-contentful@latest",
  "_id": "spike-contentful@1.0.0",
  "_inCache": true,
  "_location": "/spike-contentful",
  "_nodeVersion": "7.7.1",
  "_npmOperationalInternal": {
    "host": "packages-12-west.internal.npmjs.com",
    "tmp": "tmp/spike-contentful-1.0.0.tgz_1491431062674_0.533143957844004"
  },
  "_npmUser": {
    "name": "jescalan",
    "email": "npm.je@mailhero.io"
  },
  "_npmVersion": "4.1.2",
  "_phantomChildren": {},
  "_requested": {
    "raw": "spike-contentful",
    "scope": null,
    "escapedName": "spike-contentful",
    "name": "spike-contentful",
    "rawSpec": "",
    "spec": "latest",
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/spike-contentful/-/spike-contentful-1.0.0.tgz",
  "_shasum": "8fa7efa7fe3339fc7d06471978bc0a5aa3d4881e",
  "_shrinkwrap": null,
  "_spec": "spike-contentful",
  "_where": "/home/muthu/try/spiket",
  "author": {
    "name": "Tom Milewski"
  },
  "ava": {
    "verbose": "true",
    "serial": "true"
  },
  "bugs": {
    "url": "https://github.com/static-dev/spike-contentful/issues"
  },
  "dependencies": {
    "contentful": "^4.1.2",
    "joi": "^10.4.1",
    "reshape": "^0.4.1",
    "reshape-loader": "^1.0.0",
    "when": "^3.7.8"
  },
  "description": "Contentful CMS plugin for spike",
  "devDependencies": {
    "ava": "^0.19.0",
    "coveralls": "^2.11.16",
    "dotenv": "^4.0.0",
    "nyc": "^10.1.2",
    "reshape-standard": "^1.0.0",
    "rimraf": "^2.6.0",
    "spike-core": "^1.0.0",
    "standard": "^10.0.0"
  },
  "directories": {},
  "dist": {
    "shasum": "8fa7efa7fe3339fc7d06471978bc0a5aa3d4881e",
    "tarball": "https://registry.npmjs.org/spike-contentful/-/spike-contentful-1.0.0.tgz"
  },
  "engines": {
    "node": ">= 6.0.0"
  },
  "gitHead": "342048fbc625b064fb45e41d1dbc528401e69334",
  "homepage": "https://github.com/static-dev/spike-contentful",
  "keywords": [
    "spikeplugin",
    "contentful",
    "contentfulcms",
    "spike"
  ],
  "license": "MIT",
  "main": "lib",
  "maintainers": [
    {
      "name": "jescalan",
      "email": "npm.je@mailhero.io"
    },
    {
      "name": "tmilewski",
      "email": "tom@carrotcreative.com"
    }
  ],
  "name": "spike-contentful",
  "optionalDependencies": {},
  "readme": "# Spike Contentful Plugin\n\n[![npm](http://img.shields.io/npm/v/spike-contentful.svg?style=flat)](https://badge.fury.io/js/spike-contentful) [![tests](http://img.shields.io/travis/static-dev/spike-contentful/master.svg?style=flat)](https://travis-ci.org/static-dev/spike-contentful) [![dependencies](http://img.shields.io/david/static-dev/spike-contentful.svg?style=flat)](https://david-dm.org/static-dev/spike-contentful)\n[![coverage](http://img.shields.io/coveralls/static-dev/spike-contentful.svg?style=flat)](https://coveralls.io/github/static-dev/spike-contentful)\n\n[Contentful CMS](https://www.contentful.com/) plugin for [spike](https://github.com/static-dev/spike)\n\n> **Note:** This project is in early development, and versioning is a little different. [Read this](http://markup.im/#q4_cRZ1Q) for more details.\n\n### Why should you care?\n\nIf you're using [Contentful](https://www.contentful.com/) and would like to pull your data for compilation into a [spike](https://github.com/static-dev/spike) static site, this will help you out.\n\n### Installation\n\n`npm install spike-contentful -S`\n\n### Usage\n\nThis is a standard [webpack](https://webpack.github.io/) plugin, but is built for and intended to be used with [spike](https://github.com/static-dev/spike). You can include it in your spike project as such:\n\n```js\n// app.js\nconst Contentful = require('spike-contentful')\nconst htmlStandards = require('reshape-standard')\nconst locals = {}\n\nmodule.exports = {\n  plugins: [\n    new Contentful({\n      addDataTo: locals,\n      accessToken: 'xxx',\n      spaceId: 'xxx',\n      contentTypes: [\n        {\n          name: 'posts',\n          id: '633fTeiMaxxxxxxxxx',\n        },\n        {\n          name: 'authors',\n          id: '223gTahLaxxxxxxxxx',\n        }\n      ]\n    })\n  ],\n  reshape: (ctx) => {\n    return htmlStandards({\n      locals\n    })\n  }\n}\n```\n\nAt a minimum, the `spike-contentful` plugin requires both `name` and `id` for `contentTypes`. The `name` corresponds with how you'd like to access it in your templates. The `id` is found listed under \"Identifier\" by logging into Contentful and clicking \"APIs\" then \"Content model explorer\".\n\nSince Spike uses `reshape`, you can use a variety of different plugins to expose local variables to your html. We are using [reshape](https://github.com/reshape/reshape) along with [spike html standards](https://github.com/static-dev/spike-html-standards) here because it's the plugin provided in spike's default template, and also is currently the only plugin that provides the ability to run complex loops through objects.\n\nIn order to pass the data correctly, you must pass `spike-contentful` an object, which it will load the data onto when the compile begins under a `contentful` key. If you also pass the same object to whatever `reshape` plugin you are using in whatever manner it requires to make the data available in your html templates, the data will be present on that object before they start compiling. This is a slightly unconventional pattern for Javascript libraries, but in this situation it allows for maximum flexibility and convenience.\n\nOnce included, it will expose a `contentful` local to your jade files, which you can use to iterate through your content types. Based on the example above, the `posts` content type will be accessible through `contentful.posts`, as such:\n\n\n```jade\n// a template file\nul\n  each(loop='post of contentful.posts')\n    li {{ JSON.stringify(post) }}\n```\nFor the sugar-free\n``` html \n<ul>\n\t<each loop=\"post of contentful.blog\">\n\t\t<li>{{ JSON.stringify(post) }}</li>\n\t</each>\n</ul>\n```\n\n### Filters\n\n#### Limit\n\nTo limit the number of results for a given content type:\n\n```js\nnew Contentful({\n  addDataTo: locals,\n  accessToken: 'xxx',\n  spaceId: 'xxx',\n  contentTypes: [\n    {\n      name: 'posts',\n      id: '633fTeiMaxxxxxxxxx',\n      filters: {\n        limit: 10\n      }\n    }\n  ]\n})\n```\n\n#### Order\n\nTo order results of a given content type:\n\n```js\nnew Contentful({\n  addDataTo: locals,\n  accessToken: 'xxx',\n  spaceId: 'xxx',\n  contentTypes: [\n    {\n      name: 'posts',\n      id: '633fTeiMaxxxxxxxxx',\n      filters: {\n        limit: 10,\n        order: 'sys.createdAt'\n      }\n    }\n  ]\n})\n```\n\n### Transforms\n\nContentful returns a lot of associated data and, as a result, we include a way to clean it up. You also have the ability to pass your own custom `transform` option to each content type allowing you to transform the data however you like before it's sent to your views.\n\n```js\nnew Contentful({\n  addDataTo: locals,\n  accessToken: 'xxx',\n  spaceId: 'xxx',\n  contentTypes: [\n    {\n      name: 'posts',\n      id: '633fTeiMaxxxxxxxxx',\n      transform: (post) => {\n        // do your transformation here...\n        return post\n      }\n    }\n  ]\n})\n```\n\nThis plugin ships with a default transform function that will run some basic cleanup. However, be warned that the transform will enter an infinite loop and crash if there are circular references within the data, which is not an uncommon occurance, so please be very careful utilizing this transform. To enable our default transform, you can pass `true` as such:\n\n```js\nnew Contentful({\n  addDataTo: locals,\n  accessToken: 'xxx',\n  spaceId: 'xxx',\n  contentTypes: [\n    {\n      name: 'posts',\n      id: '633fTeiMaxxxxxxxxx',\n      transform: true\n    }\n  ]\n})\n```\n\nIf you'd like to use our default transform outside of the library, this is also available as an export. For example, you could include it and use it with client-side JS responses.\n\n```js\nconst Contentful = require('spike-contentful')\nconsole.log(Contentful.transform)\n```\n\n### Templates\n\nUsing the template option allows you to write objects returned from Contentful to single page templates. For example, if you are trying to render a blog as static, you might want each post returned from the API to be rendered as a single page by itself.\n\nThe `template` option is an object with `path` and `output` keys. The `path` is an absolute or relative path to a template to be used to render each item, and output is a function with the currently iterated item as a parameter, which should return a string representing a path relative to the project root where the single view should be rendered. For example:\n\n```js\nnew Contentful({\n  addDataTo: locals,\n  accessToken: 'xxx',\n  spaceId: 'xxx'\n  contentTypes: [{\n    name: 'posts',\n    id: '633fTeiMaxxxxxxxxx',\n    template: {\n      path: 'templates/post.html',\n      output: (post) => { return `posts/${post.id}.html` }\n    }\n  }]\n})\n```\n\nYour template must use the `item` variable as seen below. Note: you also will need to prevent Spike from attempting to render your template file normally by adding your templates to Spike's `ignore` option, or adding an underscore to the file name.\n\n```html\n<p>{{item.title}}</p>\n```\n\n### JSON Output\n\nFinally, if you'd like to have the output written locally to a JSON file so that it's cached locally, you can pass the name of the file, resolved relative to your project's output, as a `json` option to the plugin. For example:\n\n```js\nnew Contentful({\n  addDataTo: locals,\n  accessToken: 'xxx',\n  spaceId: 'xxx'\n  contentTypes: [{\n    name: 'posts',\n    id: '633fTeiMaxxxxxxxxx'\n  }],\n  json: 'data.json'\n})\n```\n\nYou may also choose to have the ouput written specifically for any content type :\n\n```js\nnew Contentful({\n  addDataTo: locals,\n  accessToken: 'xxx',\n  spaceId: 'xxx'\n  contentTypes: [\n    {\n      name: 'posts',\n      id: '633fTeiMaxxxxxxxxx',\n      // JSON output expected for this content type\n      json: 'posts.json'\n    },\n    {\n      name: 'press',\n      id: '4Em9bQeIQxxxxxxxxx'\n      // No JSON output needed for this content type\n    }\n  ],\n  // Save all content types data in one file\n  json: 'alldata.json'\n})\n```\n\n### Testing\n\nTo run the tests locally, you'll need to add a `test/.env` with your name and token values:\n\n- `cp test/.env.sample test/.env`\n- `accessToken` is derived from \"APIs\" > \"Content Delivery API Keys\" in the Contentful admin section.\n- `spaceId` is also derived from \"APIs\" > \"Content Delivery API Keys\" in the Contentful admin section.\n\n### License & Contributing\n\n- Details on the license [can be found here](LICENSE.md)\n- Details on running tests and contributing [can be found here](CONTRIBUTING.md)\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/static-dev/spike-contentful.git"
  },
  "scripts": {
    "coverage": "nyc ava",
    "coveralls": "nyc --reporter=lcov ava && cat ./coverage/lcov.info | coveralls",
    "test": "ava"
  },
  "version": "1.0.0"
}
